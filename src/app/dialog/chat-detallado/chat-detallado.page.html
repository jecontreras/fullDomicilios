<ion-header>
  <ion-toolbar color="primary">
    <ion-toolbar>
      <ion-button slot="start" fill="clear" (click)="exit()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
      <div>
        <div class="ion-text-center">
          <p>EJECUTANDO MANDADO</p>
        </div>
      </div>
    </ion-toolbar>
    <ion-toolbar>
      <div class="ion-text-center">
        <p>
          <ion-chip class="chipPerfil">
            <ion-avatar class="avatarPerfil">
              <img
                [src]="chatDe.foto || 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjYzVkYmZmIiBkPSJNMCAwaDUxMnY1MTJIMHoiLz48cGF0aCBkPSJNMjU2IDMwNGM2MS42IDAgMTEyLTUwLjQgMTEyLTExMlMzMTcuNiA4MCAyNTYgODBzLTExMiA1MC40LTExMiAxMTIgNTAuNCAxMTIgMTEyIDExMnptMCA0MGMtNzQuMiAwLTIyNCAzNy44LTIyNCAxMTJ2NTZoNDQ4di01NmMwLTc0LjItMTQ5LjgtMTEyLTIyNC0xMTJ6IiBmaWxsPSIjODJhZWZmIi8+PC9zdmc+'" />
            </ion-avatar>
            <ion-label>{{ chatDe.nombre }}</ion-label>
          </ion-chip>
        </p>
      </div>
    </ion-toolbar>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-toolbar>
    <div class="ion-text-center">
      <h5>ESTATUS DEL ENVIO <span *ngIf="data.ordenes.estado == 0">PROCESO</span> <span
          *ngIf="data.ordenes.estado == 1">FINALIZADO</span>
      </h5>
      <ion-button color="primary" (click)="confirmar()" [disabled]="disableBtnConfirmar">
        CONFIRMAR Y FINALIZAR
      </ion-button>
    </div>
  </ion-toolbar>
  <br>
  <div class="ion-text-center">
    <ion-button color="primary" (click)="openMapaDrive()">
      VER HUBICACION DE DRIVER
    </ion-button>
  </div>
  <br>
  <ion-card class="altoCars has-card-footer">
    <ion-card-header class="colorTitulo">
      <div class="ion-text-center">
        <ion-card-title color="medium">BANDEJA DE MENSAJES</ion-card-title>
      </div>
    </ion-card-header>
  </ion-card>

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)" pullMin="200" pullMax="300">
    <ion-refresher-content>
    </ion-refresher-content>
  </ion-refresher>

  <ion-list>

    <ion-item *ngFor="let item of listRow">
      <ion-avatar slot="start">
        <img [src]="item['emisor']?.foto || './assets/perfil.png'">
      </ion-avatar>
      <ion-label>
        <ion-text color="dark">
          <p>{{ item['text'] }}</p>
        </ion-text>
      </ion-label>
    </ion-item>
  </ion-list>

  <div class="ion-text-center" *ngIf="listRow.length == 0">
    <ion-text colo="dark">
      <span>Lista Vacia</span>
    </ion-text>
  </div>

  <ion-infinite-scroll threshold="150px" (ionInfinite)="loadData( $event )">
    <ion-infinite-scroll-content loadingSpinner="crescent" loadingtext="Cargando data..">

    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>

<ion-footer>
  <ion-row>
    <ion-col size="12">
      <ion-input class="ion-color-lavel" [(ngModel)]="mensajeTxt" placeholder="Escribe un mensaje"
        (change)="submitChat()" required type="text"></ion-input>
    </ion-col>
  </ion-row>
</ion-footer>